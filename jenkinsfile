pipeline {
    agent any
    stages {
        stage ('Build dockerfile') {
            steps{
                sh "docker build -t pipeline2 ."
            }
        } 
        stage ('push dockerfile') {
            steps {
                withCredentials([string(credentialsId: 'dockerhub-password', variable: 'DOCKERHUB_PASS')]) {
                sh '''
                    echo "$DOCKERHUB_PASS" | docker login -u yigalisaac --Yigalisaac0106@-stdin
                '''
            }

                sh "docker push pipeline2:latest ."

            }

        }

    }
}